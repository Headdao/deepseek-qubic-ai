<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‰ç«¯ AI çµ„ä»¶æ¸¬è©¦</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            background: #1e1e1e; 
            color: #e8eaed; 
        }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #444; 
            border-radius: 8px; 
            background: #2d2d2d;
        }
        .success { color: #4caf50; }
        .error { color: #f44336; }
        .warning { color: #ff9800; }
        button { 
            background: #4285f4; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 5px;
        }
        button:hover { background: #1a73e8; }
        .log { 
            background: #1e1e1e; 
            border: 1px solid #444; 
            padding: 10px; 
            font-family: monospace; 
            font-size: 12px; 
            height: 200px; 
            overflow-y: auto;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª Qubic AI å‰ç«¯çµ„ä»¶æ¸¬è©¦é é¢</h1>
    
    <div class="test-section">
        <h2>ğŸ”Œ API é€£æ¥æ¸¬è©¦</h2>
        <button onclick="testAPIConnection()">æ¸¬è©¦ API é€£æ¥</button>
        <button onclick="testAIEndpoints()">æ¸¬è©¦ AI ç«¯é»</button>
        <div id="api-status" class="log"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ¤– AI çµ„ä»¶æ¸¬è©¦</h2>
        <button onclick="loadAIComponents()">è¼‰å…¥ AI çµ„ä»¶</button>
        <button onclick="testAIAnalysis()">æ¸¬è©¦ AI åˆ†æ</button>
        <button onclick="testAIQuery()">æ¸¬è©¦ AI å•ç­”</button>
        <div id="ai-status" class="log"></div>
    </div>
    
    <div class="test-section">
        <h2>ğŸ”§ é–‹ç™¼è€…æ§åˆ¶å°æ¸¬è©¦</h2>
        <button onclick="loadDevConsole()">è¼‰å…¥é–‹ç™¼è€…æ§åˆ¶å°</button>
        <button onclick="toggleDevConsole()">åˆ‡æ›æ§åˆ¶å° (F12)</button>
        <button onclick="testConsoleLogging()">æ¸¬è©¦æ—¥èªŒè¨˜éŒ„</button>
        <div id="console-status" class="log"></div>
    </div>

    <script>
        const API_BASE = 'http://localhost:8000/api';
        
        function log(containerId, message, type = 'info') {
            const container = document.getElementById(containerId);
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'error' ? '#f44336' : type === 'success' ? '#4caf50' : type === 'warning' ? '#ff9800' : '#e8eaed';
            container.innerHTML += `<span style="color: ${color}">[${timestamp}] ${message}</span>\n`;
            container.scrollTop = container.scrollHeight;
        }
        
        async function testAPIConnection() {
            log('api-status', 'é–‹å§‹æ¸¬è©¦ API é€£æ¥...', 'info');
            
            try {
                const response = await fetch(`${API_BASE}/status`);
                if (response.ok) {
                    const data = await response.json();
                    log('api-status', `âœ… API é€£æ¥æˆåŠŸ: ${JSON.stringify(data)}`, 'success');
                } else {
                    log('api-status', `âŒ API é€£æ¥å¤±æ•—: ${response.status}`, 'error');
                }
            } catch (error) {
                log('api-status', `âŒ API é€£æ¥éŒ¯èª¤: ${error.message}`, 'error');
            }
        }
        
        async function testAIEndpoints() {
            log('api-status', 'æ¸¬è©¦ AI ç«¯é»...', 'info');
            
            const endpoints = ['/ai/status', '/ai/health'];
            
            for (const endpoint of endpoints) {
                try {
                    const response = await fetch(`${API_BASE}${endpoint}`);
                    if (response.ok) {
                        log('api-status', `âœ… ${endpoint} å¯ç”¨`, 'success');
                    } else {
                        log('api-status', `âš ï¸ ${endpoint} ç‹€æ…‹ç¢¼: ${response.status}`, 'warning');
                    }
                } catch (error) {
                    log('api-status', `âŒ ${endpoint} éŒ¯èª¤: ${error.message}`, 'error');
                }
            }
        }
        
        function loadAIComponents() {
            log('ai-status', 'è¼‰å…¥ AI çµ„ä»¶è…³æœ¬...', 'info');
            
            // è¼‰å…¥ AI çµ„ä»¶ CSS
            const cssLink = document.createElement('link');
            cssLink.rel = 'stylesheet';
            cssLink.href = '/css/ai-components.css';
            document.head.appendChild(cssLink);
            
            // è¼‰å…¥ AI çµ„ä»¶ JavaScript
            const script = document.createElement('script');
            script.src = '/js/ai-components.js';
            script.onload = () => {
                log('ai-status', 'âœ… AI çµ„ä»¶è…³æœ¬è¼‰å…¥æˆåŠŸ', 'success');
                
                // åˆå§‹åŒ– AI çµ„ä»¶
                try {
                    window.testAI = new QubicAIComponents();
                    log('ai-status', 'âœ… AI çµ„ä»¶åˆå§‹åŒ–æˆåŠŸ', 'success');
                } catch (error) {
                    log('ai-status', `âŒ AI çµ„ä»¶åˆå§‹åŒ–å¤±æ•—: ${error.message}`, 'error');
                }
            };
            script.onerror = () => {
                log('ai-status', 'âŒ AI çµ„ä»¶è…³æœ¬è¼‰å…¥å¤±æ•—', 'error');
            };
            document.head.appendChild(script);
        }
        
        async function testAIAnalysis() {
            if (!window.testAI) {
                log('ai-status', 'âŒ è«‹å…ˆè¼‰å…¥ AI çµ„ä»¶', 'error');
                return;
            }
            
            log('ai-status', 'æ¸¬è©¦ AI åˆ†æåŠŸèƒ½...', 'info');
            
            try {
                const testData = {
                    tick: 15234567,
                    epoch: 134,
                    duration: 1.2,
                    health: { overall: 'å¥åº·' }
                };
                
                const analysis = await window.testAI.callAIAnalysis(testData);
                log('ai-status', `âœ… AI åˆ†ææˆåŠŸ: ${JSON.stringify(analysis, null, 2)}`, 'success');
            } catch (error) {
                log('ai-status', `âŒ AI åˆ†æå¤±æ•—: ${error.message}`, 'error');
            }
        }
        
        async function testAIQuery() {
            if (!window.testAI) {
                log('ai-status', 'âŒ è«‹å…ˆè¼‰å…¥ AI çµ„ä»¶', 'error');
                return;
            }
            
            log('ai-status', 'æ¸¬è©¦ AI å•ç­”åŠŸèƒ½...', 'info');
            
            try {
                const response = await window.testAI.callQAAPI('æ¸¬è©¦å•é¡Œï¼šç•¶å‰ç¶²è·¯ç‹€æ³å¦‚ä½•ï¼Ÿ');
                log('ai-status', `âœ… AI å•ç­”æˆåŠŸ: ${JSON.stringify(response, null, 2)}`, 'success');
            } catch (error) {
                log('ai-status', `âŒ AI å•ç­”å¤±æ•—: ${error.message}`, 'error');
            }
        }
        
        function loadDevConsole() {
            log('console-status', 'è¼‰å…¥é–‹ç™¼è€…æ§åˆ¶å°...', 'info');
            
            // è¼‰å…¥æ§åˆ¶å° CSS
            const cssLink = document.createElement('link');
            cssLink.rel = 'stylesheet';
            cssLink.href = '/css/dev-console.css';
            document.head.appendChild(cssLink);
            
            // è¼‰å…¥æ§åˆ¶å° JavaScript
            const script = document.createElement('script');
            script.src = '/js/dev-console.js';
            script.onload = () => {
                log('console-status', 'âœ… é–‹ç™¼è€…æ§åˆ¶å°è¼‰å…¥æˆåŠŸ', 'success');
                log('console-status', 'æŒ‰ F12 éµå¯é–‹å•Ÿ/é—œé–‰æ§åˆ¶å°', 'info');
            };
            script.onerror = () => {
                log('console-status', 'âŒ é–‹ç™¼è€…æ§åˆ¶å°è¼‰å…¥å¤±æ•—', 'error');
            };
            document.head.appendChild(script);
        }
        
        function toggleDevConsole() {
            if (window.qubicDevConsole) {
                window.qubicDevConsole.toggleConsole();
                log('console-status', 'âœ… æ§åˆ¶å°ç‹€æ…‹å·²åˆ‡æ›', 'success');
            } else {
                log('console-status', 'âŒ è«‹å…ˆè¼‰å…¥é–‹ç™¼è€…æ§åˆ¶å°', 'error');
            }
        }
        
        function testConsoleLogging() {
            if (window.qubicDevConsole) {
                window.qubicDevConsole.log('INFO', 'test', 'é€™æ˜¯ä¸€å€‹æ¸¬è©¦æ—¥èªŒæ¢ç›®');
                window.qubicDevConsole.log('WARNING', 'test', 'é€™æ˜¯ä¸€å€‹è­¦å‘Šæ—¥èªŒ');
                window.qubicDevConsole.log('ERROR', 'test', 'é€™æ˜¯ä¸€å€‹éŒ¯èª¤æ—¥èªŒ');
                log('console-status', 'âœ… æ¸¬è©¦æ—¥èªŒå·²ç™¼é€åˆ°æ§åˆ¶å°', 'success');
            } else {
                log('console-status', 'âŒ è«‹å…ˆè¼‰å…¥é–‹ç™¼è€…æ§åˆ¶å°', 'error');
            }
        }
        
        // è‡ªå‹•é–‹å§‹æ¸¬è©¦
        window.addEventListener('load', () => {
            log('api-status', 'é é¢è¼‰å…¥å®Œæˆï¼Œæº–å‚™é–‹å§‹æ¸¬è©¦', 'info');
            log('ai-status', 'æº–å‚™æ¸¬è©¦ AI çµ„ä»¶', 'info');
            log('console-status', 'æº–å‚™æ¸¬è©¦é–‹ç™¼è€…æ§åˆ¶å°', 'info');
        });
    </script>
</body>
</html>

